dom-module#quill-draft-list
  template
    template(is="dom-repeat", items="{{data}}", as="draft")
      quill-draft-card.ui.fluid.card(src="{{draft.link}}")
  script.
    Polymer({
      is: 'quill-draft-list',
      properties: {
        src: { type: String , observer: '_load' },
        data: { type: Object },
        state: { type: String },
        source: { type: String },
        output: { type: String }
      },
      _sync: function() {
        var self = this;
        self._load();
      },
      _load: function(uri, back) {
        var self = this;
        console.log('[QUILL:DRAFT-LIST]', '_load', uri, back);
        self.toggleClass('loading', true);

        // TODO: use this API instead:
        // fabric.get(self.src, function(err, data) { ... });
        
        var datastore = document.querySelector('maki-datastore[for=quill]');
        datastore._get(uri, function(err, data) {
          console.log('[QUILL:DRAFT-LIST]', '_load', '_get', uri, 'retrieved', err, data);
          self.data = data;
          self.toggleClass('loading', false);
        });

      },
      ready: function() {
        console.log('[QUILL:DRAFT-LIST]', 'ready');
        self.src = '/drafts';
      }
    });
